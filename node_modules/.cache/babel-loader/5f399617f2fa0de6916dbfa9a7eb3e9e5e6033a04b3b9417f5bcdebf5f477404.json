{"ast":null,"code":"import _regeneratorRuntime from\"D:/React JS/Projects/Warehouse Management/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/React JS/Projects/Warehouse Management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React JS/Projects/Warehouse Management/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Suspense,lazy}from'react';import{Box,Container,Grid,Typography,Stack}from'@mui/material';import{ButtonPrimary,CameraScan}from'../../components';import{useTranslation}from'react-i18next';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{commonAction}from'../../redux/commonSlice';import QrCode2Icon from'@mui/icons-material/QrCode2';import{isNullOrEmpty,fetchData}from'../../functions';import{downloadURL}from'../../api';import warehouseImg from\"../../assets/images/thumbs/warehouse.png\";import equipImg from\"../../assets/images/thumbs/equipment.png\";import styles from\"./HomePage.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var width=window.innerWidth;var height=(width<=479?window.innerHeight-175:window.innerHeight-215)+\"px\";var CardType=/*#__PURE__*/lazy(function(){return import('../../components/Card/Type/CardType');});var HomePage=function HomePage(){////// Initial Data\nvar _useState=useState(\"warehouse\"),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];///// User Data\nvar lastLogin=localStorage.getItem(\"lastLoginWH\")===null?null:JSON.parse(localStorage.getItem(\"lastLoginWH\"));////// Handle Camera\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openCamera=_useState4[0],setOpenCamera=_useState4[1];////// Navigate\nvar navigate=useNavigate();////// Translate\nvar _useTranslation=useTranslation(),t=_useTranslation.t;////// Dispatch\nvar dispatch=useDispatch();//////Camera Option\nvar handleOpenCamera=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0://navigate(\"/scan-result\", {state: {plantCode: \"2110\", locCode: \"2110_10_A0001\", locName: \"Section 1\", whCode: \"10\"}});\nsetOpenCamera(true);case 1:case\"end\":return _context.stop();}},_callee);}));return function handleOpenCamera(){return _ref.apply(this,arguments);};}();var handleCloseCamera=function handleCloseCamera(){setOpenCamera(function(prev){return false;});};var handleScanSuccess=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(decodedText,decodedResult){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(isNullOrEmpty(decodedText)){_context2.next=3;break;}_context2.next=3;return fetchDownload(downloadURL,{ARG_TYPE:\"Q_SCAN\",ARG_EMPID:\"\",ARG_WH:lastLogin.WH_CD,ARG_SCAN:decodedText,OUT_CURSOR:\"\"},\"scan_qr\");case 3:case\"end\":return _context2.stop();}},_callee2);}));return function handleScanSuccess(_x,_x2){return _ref2.apply(this,arguments);};}();/////// Validate Barcode\nvar fetchDownload=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url,dataConfig,type){var result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetchData(url,dataConfig);case 2:result=_context3.sent;if(result){if((result===null||result===void 0?void 0:result.length)>0){navigate(\"/scan-result\",{state:{plantCode:result[0].PLANT_CD,locCode:result[0].CODE,locName:result[0].NAME,whCode:lastLogin.WH_CD}});}else{handleCloseCamera();dispatch(commonAction.setTypeNotice(\"qr-error\"));dispatch(commonAction.openNotice());}}else{dispatch(commonAction.setTypeNotice(\"connect-failed\"));dispatch(commonAction.openNotice());}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function fetchDownload(_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();////// Service under contruct\nvar handleContruct=function handleContruct(){dispatch(commonAction.setTypeNotice(\"under-construct\"));dispatch(commonAction.openNotice());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{className:styles['s-home-2'],children:/*#__PURE__*/_jsx(Box,{className:styles['s-home-content'],children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Box,{className:styles['s-form-content'],children:/*#__PURE__*/_jsxs(Box,{sx:{width:\"100%\",minHeight:height},children:[/*#__PURE__*/_jsxs(Box,{className:styles['b-card-3'],children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"center\",gap:2,children:[/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"center\",position:\"relative\",transform:\"rotate(45deg)\"},children:[/*#__PURE__*/_jsx(QrCode2Icon,{style:{fontSize:35}}),/*#__PURE__*/_jsx(Box,{className:styles['b-qr-border']})]}),/*#__PURE__*/_jsx(Typography,{className:styles['b-title'],children:t('notify_title')})]}),/*#__PURE__*/_jsx(Typography,{className:styles['b-desc'],children:t('notify_desc')})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1.5,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(CardType,{title:\"Warehouse\",subtitle:\"Management\",thumb:warehouseImg,isSelect:type===\"warehouse\",handleClick:function handleClick(){}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(CardType,{title:\"Equipments\",subtitle:\"Management\",thumb:equipImg,isSelect:type===\"equipment\",handleClick:handleContruct})})})]}),/*#__PURE__*/_jsx(Box,{className:styles['s-bot'],children:/*#__PURE__*/_jsx(ButtonPrimary,{title:t('btn_scan'),handleClick:handleOpenCamera,name:\"scan\"})})]})})})})}),openCamera&&/*#__PURE__*/_jsx(CameraScan,{open:openCamera,handleSuccess:handleScanSuccess,handleClose:handleCloseCamera})]});};export default HomePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}